(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[0],[,,,,function(t,e,c){t.exports={item:"CartItem_item__M1TY_",details:"CartItem_details__30WDr",quantity:"CartItem_quantity__rftId",price:"CartItem_price__wuqEU",itemprice:"CartItem_itemprice__3Z8z3",actions:"CartItem_actions__3AIuP"}},,,function(t,e,c){t.exports={item:"ProductItem_item__2ToYg",price:"ProductItem_price__2M6Cv",actions:"ProductItem_actions__3343Z"}},function(t,e,c){t.exports={notification:"Notfication_notification__2wZ2M",error:"Notfication_error__JyF1f",success:"Notfication_success__1kfxs"}},,,function(t,e,c){t.exports={cart:"Cart_cart__2_zav"}},,function(t,e,c){t.exports={button:"CartButton_button__3uoNv",badge:"CartButton_badge__285g7"}},,function(t,e,c){t.exports={card:"Card_card__1y8Tc"}},,function(t,e,c){t.exports={header:"MainHeader_header__dcaL7"}},function(t,e,c){t.exports={products:"Products_products__2if8A"}},,,,,function(t,e,c){},,,,,,function(t,e,c){"use strict";c.r(e);var i=c(6),r=c.n(i),n=(c(23),c(15)),a=c.n(n),s=c(0),o=function(t){return Object(s.jsx)("section",{className:"".concat(a.a.card," ").concat(t.className?t.className:""),children:t.children})},d=c(11),u=c.n(d),l=c(4),j=c.n(l),p=c(2),f=c(5),b=c(14),m=c(3),h=c.n(m),x=c(9),O=Object(x.b)({name:"UI",initialState:{showcart:!1,notification:null},reducers:{toggleCart:function(t){t.showcart=!t.showcart},showNotfication:function(t,e){t.notification={status:e.payload.status,title:e.payload.title,message:e.payload.message}}}}),_=Object(x.b)({name:"cart",initialState:{items:[],totalPrice:0},reducers:{addtoCart:function(t,e){t.totalPrice=t.totalPrice+e.payload.price,-1!==e.payload.itemexist?(t.items[e.payload.itemexist].quantity+=1,t.items[e.payload.itemexist].total+=t.items[e.payload.itemexist].price):t.items.push({id:e.payload.id,title:e.payload.title,price:e.payload.price,quantity:e.payload.quantity,total:e.payload.price})},additem:function(t,e){t.totalPrice+=t.items[e.payload].price,t.items[e.payload].quantity+=1,t.items[e.payload].total+=t.items[e.payload].price},removeitem:function(t,e){if(t.totalPrice-=t.items[e.payload].price,t.items[e.payload].quantity-=1,t.items[e.payload].total-=t.items[e.payload].price,console.log(t.items[e.payload].price),0===t.items[e.payload].quantity){var c=t.items.filter((function(c){return c.id!==t.items[e.payload].id}));t.items=Object(b.a)(c)}},fecthdata:function(t,e){t.items=Object(b.a)(e.payload)}}}),y=Object(x.a)({reducer:{UIReducer:O.reducer,cartReducer:_.reducer}}),v=O.actions,g=_.actions,N=y,w=function(t){var e=Object(p.c)((function(t){return t.cartReducer.items})),c=Object(p.b)(),i=t.item,r=i.id,n=i.title,a=i.quantity,o=i.total,d=i.price,u=e.findIndex((function(t){return t.id===r}));return Object(s.jsxs)("li",{className:j.a.item,children:[Object(s.jsxs)("header",{children:[Object(s.jsx)("h3",{children:n}),Object(s.jsxs)("div",{className:j.a.price,children:["$",o.toFixed(2),Object(s.jsxs)("span",{className:j.a.itemprice,children:["($",d.toFixed(2),"/item)"]})]})]}),Object(s.jsxs)("div",{className:j.a.details,children:[Object(s.jsxs)("div",{className:j.a.quantity,children:["x ",Object(s.jsx)("span",{children:a})]}),Object(s.jsxs)("div",{className:j.a.actions,children:[Object(s.jsx)("button",{onClick:function(){c(g.removeitem(u))},children:"-"}),Object(s.jsx)("button",{onClick:function(){c(g.additem(u))},children:"+"})]})]})]})},C=function(t){var e=Object(p.c)((function(t){return t.cartReducer.items})),c=Object(p.c)((function(t){return t.cartReducer.totalPrice})),i="No items in your Cart Yet";return e.length>0&&(i=e.map((function(t){return Object(s.jsx)("ul",{children:Object(s.jsx)(w,{totalPrice:c,item:{id:t.id,title:t.title,quantity:t.quantity,total:t.total,price:t.price}})},t.id)}))),Object(s.jsxs)(o,{className:u.a.cart,children:[Object(s.jsx)("h2",{children:"Your Shopping Cart"}),i,Object(s.jsxs)("div",{className:u.a.quantity,children:["total: $",Object(s.jsx)("span",{children:c})]})]})},I=c(1),k=c(13),q=c.n(k),P=function(t){var e=Object(p.b)(),c=Object(p.c)((function(t){return t.cartReducer.items})).reduce((function(t,e){return t+e.quantity}),0);return Object(s.jsxs)("button",{className:q.a.button,onClick:function(){e(v.toggleCart())},children:[Object(s.jsx)("span",{children:"My Cart"}),Object(s.jsx)("span",{className:q.a.badge,children:c})]})},S=c(17),R=c.n(S),F=function(t){return Object(s.jsxs)("header",{className:R.a.header,children:[Object(s.jsx)("h1",{children:"Food Order APP"}),Object(s.jsx)("nav",{children:Object(s.jsx)("ul",{children:Object(s.jsx)("li",{children:Object(s.jsx)(P,{})})})})]})},E=function(t){return Object(s.jsxs)(I.Fragment,{children:[Object(s.jsx)(F,{}),Object(s.jsx)("main",{children:t.children})]})},A=c(7),B=c.n(A),U=function(t){var e=t.id,c=t.title,i=t.price,r=t.description,n=Object(p.c)((function(t){return t.cartReducer.items})),a=Object(p.b)();return Object(s.jsx)("li",{className:B.a.item,children:Object(s.jsxs)(o,{children:[Object(s.jsxs)("header",{children:[Object(s.jsx)("h3",{children:c}),Object(s.jsxs)("div",{className:B.a.price,children:["$",i.toFixed(2)]})]}),Object(s.jsx)("p",{children:r}),Object(s.jsx)("div",{className:B.a.actions,children:Object(s.jsx)("button",{onClick:function(){var t=n.findIndex((function(t){return t.id===e})),r={id:e,title:c,price:i,quantity:1,itemexist:t};a(g.addtoCart(r))},children:"Add to Cart"})})]})})},M=c(18),T=c.n(M),J=function(t){var e=[{id:"p1",title:"Sushi",price:19.99,description:"Finest fish and veggies"},{id:"p2",title:"Schnitzel",price:11.59,description:"A german specialty!"},{id:"p3",title:"Barbecue Burger",price:10.99,description:"American, raw, meaty"},{id:"p4",title:"Green Bowl",price:18.99,description:"Healthy...and green..."}].map((function(t){return Object(s.jsx)("ul",{children:Object(s.jsx)(U,{id:t.id,title:t.title,price:t.price,description:t.description})},t.id)}));return Object(s.jsxs)("section",{className:T.a.products,children:[Object(s.jsx)("h2",{children:"Taste our best meals"}),Object(s.jsxs)("div",{children:[" ",e]})]})},Y=c(8),$=c.n(Y),z=function(t){var e="";"error"===t.status&&(e=$.a.error),"success"===t.status&&(e=$.a.success);var c="".concat($.a.notification," ").concat(e);return Object(s.jsxs)("section",{className:c,children:[Object(s.jsx)("h2",{children:t.title}),Object(s.jsx)("p",{children:t.message})]})},Z=!0;var H=function(){var t=Object(p.c)((function(t){return t.UIReducer.showcart})),e=Object(p.c)((function(t){return t.cartReducer.items})),c=Object(p.b)(),i=Object(p.c)((function(t){return t.UIReducer.notification}));return Object(I.useEffect)((function(){Z?Z=!1:c(function(t){return console.log("send"),function(){var e=Object(f.a)(h.a.mark((function e(c){var i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(v.showNotfication({status:"pending",title:"Sending...",message:"Sending cart data!"})),i=function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://foodorder-redux-default-rtdb.firebaseio.com/cart.json",{method:"PUT",body:JSON.stringify(t)});case 2:if(e.sent.ok){e.next=5;break}throw new Error("Sending cart data failed.");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.prev=2,e.next=5,i();case 5:c(v.showNotfication({status:"success",title:"Success!",message:"Sent cart data successfully!"})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),c(v.showNotfication({status:"error",title:"Error!",message:"Sending cart data failed!"}));case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()}(e))}),[e,c]),Object(I.useEffect)((function(){c((console.log("fetch"),function(){var t=Object(f.a)(h.a.mark((function t(e){var c,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=function(){var t=Object(f.a)(h.a.mark((function t(){var e,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://foodorder-redux-default-rtdb.firebaseio.com/cart.json");case 2:if((e=t.sent).ok){t.next=5;break}throw new Error("Fecthing cart data failed.");case 5:return t.next=7,e.json();case 7:return c=t.sent,t.abrupt("return",c);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.prev=1,t.next=4,c();case 4:i=t.sent,e(g.fecthdata(i)),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(1);case 10:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}())),Z=!0}),[c]),Object(s.jsxs)(I.Fragment,{children:[i&&Object(s.jsx)(z,{status:i.status,title:i.title,message:i.message}),Object(s.jsxs)(E,{children:[t&&Object(s.jsx)(C,{}),Object(s.jsx)(J,{})]})]})};r.a.render(Object(s.jsx)(p.a,{store:N,children:Object(s.jsx)(H,{})}),document.getElementById("root"))}],[[29,1,2]]]);
//# sourceMappingURL=main.674c02c9.chunk.js.map